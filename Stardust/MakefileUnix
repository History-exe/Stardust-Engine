PLAT_OBJS = ../Platform/src/Platform/Platform.o
UTIL_OBJS = ../Utilities/src/Platform/Platform.o \
../Utilities/src/Math/Frustum.o \
../Utilities/src/Utilities/Timer.o \
../Utilities/src/Utilities/Logger.o \
../Utilities/src/Utilities/Thread.o \
../Utilities/src/Events/Events.o \
../Utilities/src/Network/NetworkDriver.o \
../Utilities/src/Network/Socket.o \
../Utilities/src/Network/ByteBuffer.o \

util_lib = lib/nix/stardust-utilities.a
plat_lib = lib/nix/stardust-platform.a

CFLAGS = -O3 -ffast-math -Wall -Werror
CXXFLAGS = $(CFLAGS) -Weffc++ -std=c++17 -pthread -I../Platform/include -I../Utilities/include -I../Deps/include -DCURRENT_PLATFORM=PLATFORM_NIX

CXX=clang++
all: utility_lib platform_lib 

%.o: %.c
	$(CXX) $(INCDIR) -c -o $@ $< $(CXXFLAGS)

platform_lib: $(PLAT_OBJS)
	$(AR) rcs $(plat_lib) $^

utility_lib: $(UTIL_OBJS)
	$(AR) rcs $(util_lib) $^

clean:
	rm -f $(PLAT_OBJS) $(UTIL_OBJS) ./$(plat_lib) ./$(util_lib)